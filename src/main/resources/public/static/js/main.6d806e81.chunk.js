(this.webpackJsonptwitchfe=this.webpackJsonptwitchfe||[]).push([[0],{139:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(120),s=n.n(i),a=(n(139),n(4)),o=n(173),l=n(129),u=n(181),j=n(189),d=n(190),h="",m="".concat(h,"/login"),b="".concat(h,"/register"),f="".concat(h,"/logout"),O="".concat(h,"/game"),g="".concat(h,"/game?game_name="),x="".concat(h,"/search?game_id="),p=function(e){return fetch("".concat(x).concat(e)).then((function(e){if(200!==e.status)throw Error("Fail to find the game");return e.json()}))},v=function(e){return function(e){return fetch("".concat(g).concat(e)).then((function(e){if(200!==e.status)throw Error("Fail to find the game");return e.json()}))}(e).then((function(e){if(e&&e[0].id)return p(e[0].id);throw Error("Fail to find the game")}))},y="".concat(h,"/favorite"),w=function(){return fetch(y,{credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to get favorite item");return e.json()}))},S="".concat(h,"/recommendation"),F=n(174),C=n(175),I=n(64),P=n(6);var k=function(e){var t=e.items;return null===t||void 0===t?void 0:t.map((function(e){return Object(P.jsx)(u.a.Item,{children:Object(P.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},_=n(182),E=n(183),T=n(131),R=n(184),L=n(185),q=u.a.SubMenu;var J=function(e){var t=e.favoriteItems,n=Object(r.useState)(!1),c=Object(a.a)(n,2),i=c[0],s=c[1],o=t.videos,l=t.streams,j=t.clips;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(I.a,{type:"primary",shape:"round",onClick:function(){s(!0)},icon:Object(P.jsx)(E.a,{}),children:"My Favorites"}),Object(P.jsx)(_.a,{title:"My Favorites",placement:"right",width:720,visible:i,onClose:function(){s(!1)},children:Object(P.jsxs)(u.a,{mode:"inline",defaultOpenKeys:["streams"],style:{height:"100%",borderRight:0},selectable:!1,children:[Object(P.jsx)(q,{icon:Object(P.jsx)(T.a,{}),title:"Streams",children:Object(P.jsx)(k,{items:l})},"streams"),Object(P.jsx)(q,{icon:Object(P.jsx)(R.a,{}),title:"Videos",children:Object(P.jsx)(k,{items:o})},"videos"),Object(P.jsx)(q,{icon:Object(P.jsx)(L.a,{}),title:"Clips",children:Object(P.jsx)(k,{items:j})},"clips")]})})]})},N=n(180),M=n(177),U=n(179),D=n(186),V=n(187);var A=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(I.a,{shape:"round",type:"primary",onClick:function(){c(!0)},children:"Register"}),Object(P.jsx)(N.a,{title:"Register",visible:n,onCancel:function(){c(!1)},footer:null,destroyOnClose:!0,children:Object(P.jsxs)(M.a,{name:"normal_register",initialValues:{remember:!0},onFinish:function(e){(function(e){return fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to register")}))})(e).then((function(){c(!1),l.b.success("Successfully signed up")})).catch((function(e){l.b.error(e.message)}))},preserve:!1,children:[Object(P.jsx)(M.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(P.jsx)(U.a,{prefix:Object(P.jsx)(D.a,{}),placeholder:"Username"})}),Object(P.jsx)(M.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(P.jsx)(U.a,{prefix:Object(P.jsx)(V.a,{}),placeholder:"Password"})}),Object(P.jsx)(M.a.Item,{name:"first_name",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(P.jsx)(U.a,{placeholder:"firstname"})}),Object(P.jsx)(M.a.Item,{name:"last_name",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(P.jsx)(U.a,{placeholder:"lastname"})}),Object(P.jsx)(M.a.Item,{children:Object(P.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})};var B=function(e){var t=e.onSuccess,n=Object(r.useState)(!1),c=Object(a.a)(n,2),i=c[0],s=c[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(I.a,{shape:"round",onClick:function(){s(!0)},style:{marginRight:"20px"},children:"Login"}),Object(P.jsx)(N.a,{title:"Log in",visible:i,onCancel:function(){s(!1)},footer:null,destroyOnClose:!0,children:Object(P.jsxs)(M.a,{name:"normal_login",onFinish:function(e){(function(e){var t=new FormData;return t.append("username",e.username),t.append("password",e.password),fetch(m,{method:"POST",credentials:"include",body:t}).then((function(e){if(204!==e.status)throw Error("Fail to log in")}))})(e).then((function(){s(!1),l.b.success("Welcome back"),t()})).catch((function(e){l.b.error(e.message)}))},preserve:!1,children:[Object(P.jsx)(M.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(P.jsx)(U.a,{prefix:Object(P.jsx)(D.a,{}),placeholder:"Username"})}),Object(P.jsx)(M.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(P.jsx)(U.a.Password,{prefix:Object(P.jsx)(V.a,{}),placeholder:"Password"})}),Object(P.jsx)(M.a.Item,{children:Object(P.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Login"})})]})})]})},G=o.a.Header;var H=function(e){var t=e.loggedIn,n=e.signoutOnClick,r=e.signinOnSuccess,c=e.favoriteItems;return Object(P.jsx)(G,{children:Object(P.jsxs)(F.a,{justify:"space-between",children:[Object(P.jsx)(C.a,{children:t&&Object(P.jsx)(J,{favoriteItems:c})}),Object(P.jsxs)(C.a,{children:[t&&Object(P.jsx)(I.a,{shape:"round",onClick:n,children:"Logout"}),!t&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(B,{onSuccess:r}),Object(P.jsx)(A,{})]})]})]})})},K=n(110);var W=function(e){var t=e.onSuccess,n=Object(r.useState)(!1),c=Object(a.a)(n,2),i=c[0],s=c[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(I.a,{shape:"round",onClick:function(){s(!0)},icon:Object(P.jsx)(K.a,{}),style:{marginLeft:"20px",marginTop:"20px"},children:"Custom Search"}),Object(P.jsx)(N.a,{title:"Search",visible:i,onCancel:function(){s(!1)},footer:null,children:Object(P.jsxs)(M.a,{name:"custom_search",onFinish:function(e){v(e.game_name).then((function(e){s(!1),t(e)})).catch((function(e){l.b.error(e.message)}))},children:[Object(P.jsx)(M.a.Item,{name:"game_name",rules:[{required:!0,message:"Please enter a game name"}],children:Object(P.jsx)(U.a,{placeholder:"Game name"})}),Object(P.jsx)(M.a.Item,{children:Object(P.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Search"})})]})})]})},z=n(126),Q=n(101),X=n(176),Y=n(178),Z=n(188),$=z.a.TabPane,ee="stream",te="videos",ne="clips",re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,c="".concat(e.broadcaster_name," - ").concat(e.title),i=n.find((function(t){return t.twitch_id===e.twitch_id}));return Object(P.jsxs)(P.Fragment,{children:[t&&Object(P.jsx)(Q.a,{title:i?"Remove from favorite list":"Add to favorite list",children:Object(P.jsx)(I.a,{shape:"circle",icon:i?Object(P.jsx)(E.a,{}):Object(P.jsx)(Z.a,{}),onClick:function(){var t;i?(t=e,fetch(y,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:t})}).then((function(e){if(200!==e.status)throw Error("Fail to delete favorite item")}))).then((function(){r()})).catch((function(e){l.b.error(e.message)})):function(e){return fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then((function(e){if(200!==e.status)throw Error("Fail to add favorite item")}))}(e).then((function(){r()})).catch((function(e){l.b.error(e.message)}))}})}),Object(P.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",width:450},children:Object(P.jsx)(Q.a,{title:c,children:Object(P.jsx)("span",{children:c})})})]})},ce=function(e,t,n,r){return Object(P.jsx)(X.b,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:e,renderItem:function(e){return Object(P.jsx)(X.b.Item,{style:{marginRight:"20px"},children:Object(P.jsx)(Y.a,{title:re(e,t,n,r),children:Object(P.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{width:"100%",height:"100%"},children:Object(P.jsx)("img",{alt:"Placeholder",src:(c=e.thumbnail_url,c.replace("%{height}","252").replace("%{width}","480").replace("{height}","252").replace("{width}","480")),style:{width:"100%",height:"100%"}})})})});var c}})},ie=function(e){var t=e.resources,n=e.loggedIn,r=e.favoriteItems,c=e.favoriteOnChange,i=t.videos,s=t.streams,a=t.clips,o=r.videos,l=r.streams,u=r.clips;return console.log("resources",t),console.log("favoriteItems",r),Object(P.jsxs)(z.a,{defaultActiveKey:ee,children:[Object(P.jsx)($,{tab:"Streams",forceRender:!0,children:ce(s,n,l,c)},ee),Object(P.jsx)($,{tab:"Videos",forceRender:!0,children:ce(i,n,o,c)},te),Object(P.jsx)($,{tab:"Clips",forceRender:!0,children:ce(a,n,u,c)},ne)]})},se=o.a.Header,ae=o.a.Content,oe=o.a.Sider;var le=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)([]),s=Object(a.a)(i,2),h=s[0],m=s[1],b=Object(r.useState)([]),g=Object(a.a)(b,2),x=g[0],v=g[1],y=Object(r.useState)({videos:[],streams:[],clips:[]}),F=Object(a.a)(y,2),C=F[0],I=F[1];return Object(r.useEffect)((function(){fetch(O).then((function(e){if(200!==e.status)throw Error("Fail to get top games");return e.json()})).then((function(e){v(e)})).catch((function(e){l.b.error(e.message)}))}),[]),Object(P.jsxs)(o.a,{children:[Object(P.jsx)(se,{children:Object(P.jsx)(H,{loggedIn:n,signoutOnClick:function(){fetch(f,{method:"POST",credentials:"include"}).then((function(e){if(204!==e.status)throw Error("Fail to log out")})).then((function(){c(!1),l.b.success("Successfully Signed out")})).catch((function(e){l.b.error(e.message)}))},signinOnSuccess:function(){c(!0),w().then((function(e){m(e)}))},favoriteItems:h})}),Object(P.jsxs)(o.a,{children:[Object(P.jsxs)(oe,{width:300,className:"site-layout-background",children:[Object(P.jsx)(W,{onSuccess:function(e){I(e)}}),Object(P.jsx)(u.a,{mode:"inline",onSelect:function(e){var t=e.key;"recommendation"!==t?p(t).then((function(e){I(e)})):fetch(S,{credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to get recommended item");return e.json()})).then((function(e){I(e)}))},style:{marginTop:"10px"},items:function(e){return[{label:"Recommend for you!",key:"recommendation",icon:Object(P.jsx)(j.a,{})},{label:"Popular Games",key:"popular_games",icon:Object(P.jsx)(d.a,{}),children:e.map((function(e){return{label:e.name,key:e.id,icon:Object(P.jsx)("img",{alt:"placeholder",src:e.box_art_url.replace("{height}","40").replace("{width}","40"),style:{borderRadius:"50%",marginRight:"20px"}})}}))}]}(x)})]}),Object(P.jsx)(o.a,{style:{padding:"24px"},children:Object(P.jsx)(ae,{className:"site-layout-background",style:{padding:24,margin:0,height:800,overflow:"auto"},children:Object(P.jsx)(ie,{resources:C,loggedIn:n,favoriteOnChange:function(){w().then((function(e){m(e)})).catch((function(e){l.b.error(e.message)}))},favoriteItems:h})})})]})]})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,191)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),i(e),s(e)}))};s.a.createRoot(document.getElementById("root")).render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(le,{})})),ue()}},[[171,1,2]]]);
//# sourceMappingURL=main.6d806e81.chunk.js.map